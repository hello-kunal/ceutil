# CMakeM1 checks ADDCV variable whether to include OpenCV
# and return LIBS variable with the list of libraries to link 

message(STATUS "Project dir = ${PROJECT_SOURCE_DIR}")
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)
find_package(PkgConfig REQUIRED)
pkg_check_modules(JSONCPP jsoncpp)
link_libraries(${JSONCPP_LIBRARIES})
include_directories(${JSONCPP_INCLUDE_DIRS})
find_package(wxWidgets COMPONENTS core net base REQUIRED)
include("${wxWidgets_USE_FILE}")
include_directories(${PROJECT_SOURCE_DIR}/src)
if(ADDCV)
message(STATUS "OpenCV added")
find_package(OpenCV REQUIRED)
include_directories(${OpenCV_INCLUDE_DIR})
set(LIBS ceUtil ${JSONCPP_LIBRARIES} ${wxWidgets_LIBRARIES} ${OpenCV_LIBS})
else()
message(STATUS "OpenCV not added")
set(LIBS ceUtil ${JSONCPP_LIBRARIES} ${wxWidgets_LIBRARIES})
endif()
message(STATUS "List of libraries = ${LIBS}")
